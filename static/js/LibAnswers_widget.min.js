var springSpace;!function(t){"use strict";if(void 0===t.fn.modal){var e=function(e,i){this.options=i,this.$body=t(document.body),this.$element=t(e),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.fixedContent=".navbar-fixed-top, .navbar-fixed-bottom",this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,t.proxy((function(){this.$element.trigger("loaded.bs.modal")}),this))};e.VERSION="3.4.1",e.TRANSITION_DURATION=300,e.BACKDROP_TRANSITION_DURATION=150,e.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},e.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},e.prototype.show=function(i){var s=this,n=t.Event("show.bs.modal",{relatedTarget:i});this.$element.trigger(n),this.isShown||n.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",(function(){s.$element.one("mouseup.dismiss.bs.modal",(function(e){t(e.target).is("#"+s.$element.attr("id"))&&(s.ignoreBackdropClick=!0)}))})),this.backdrop((function(){var n=t.support.transition&&s.$element.hasClass("fade");s.$element.parent().length||s.$element.appendTo(s.$body),s.$element.show().scrollTop(0),s.adjustDialog(),n&&s.$element[0].offsetWidth,s.$element.addClass("in"),s.enforceFocus();var r=t.Event("shown.bs.modal",{relatedTarget:i});n?s.$dialog.one("bsTransitionEnd",(function(){s.$element.trigger("focus").trigger(r)})).emulateTransitionEnd(e.TRANSITION_DURATION):s.$element.trigger("focus").trigger(r)})))},e.prototype.hide=function(i){i&&i.preventDefault(),i=t.Event("hide.bs.modal"),this.$element.trigger(i),this.isShown&&!i.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",t.proxy(this.hideModal,this)).emulateTransitionEnd(e.TRANSITION_DURATION):this.hideModal())},e.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy((function(t){document===t.target||this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")}),this))},e.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",t.proxy((function(t){27==t.which&&this.hide()}),this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},e.prototype.resize=function(){this.isShown?t(window).on("resize.bs.modal",t.proxy(this.handleUpdate,this)):t(window).off("resize.bs.modal")},e.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop((function(){t.$body.removeClass("modal-open"),t.resetAdjustments(),t.resetScrollbar(),t.$element.trigger("hidden.bs.modal")}))},e.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},e.prototype.backdrop=function(i){var s=this,n=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var r=t.support.transition&&n;if(this.$backdrop=t(document.createElement("div")).addClass("modal-backdrop "+n).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",t.proxy((function(t){this.ignoreBackdropClick?this.ignoreBackdropClick=!1:t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide())}),this)),r&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!i)return;r?this.$backdrop.one("bsTransitionEnd",i).emulateTransitionEnd(e.BACKDROP_TRANSITION_DURATION):i()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var a=function(){s.removeBackdrop(),i&&i()};t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",a).emulateTransitionEnd(e.BACKDROP_TRANSITION_DURATION):a()}else i&&i()},e.prototype.handleUpdate=function(){this.adjustDialog()},e.prototype.adjustDialog=function(){var t=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&t?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!t?this.scrollbarWidth:""})},e.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},e.prototype.checkScrollbar=function(){var t=window.innerWidth;if(!t){var e=document.documentElement.getBoundingClientRect();t=e.right-Math.abs(e.left)}this.bodyIsOverflowing=document.body.clientWidth<t,this.scrollbarWidth=this.measureScrollbar()},e.prototype.setScrollbar=function(){var e=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"";var i=this.scrollbarWidth;this.bodyIsOverflowing&&(this.$body.css("padding-right",e+i),t(this.fixedContent).each((function(e,s){var n=s.style.paddingRight,r=t(s).css("padding-right");t(s).data("padding-right",n).css("padding-right",parseFloat(r)+i+"px")})))},e.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad),t(this.fixedContent).each((function(e,i){var s=t(i).data("padding-right");t(i).removeData("padding-right"),i.style.paddingRight=s||""}))},e.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var i=t.fn.modal;t.fn.modal=s,t.fn.modal.Constructor=e,t.fn.modal.noConflict=function(){return t.fn.modal=i,this},t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',(function(e){var i=t(this),n=i.attr("href"),r=i.attr("data-target")||n&&n.replace(/.*(?=#[^\s]+$)/,""),a=t(document).find(r),o=a.data("bs.modal")?"toggle":t.extend({remote:!/#/.test(n)&&n},a.data(),i.data());i.is("a")&&e.preventDefault(),a.one("show.bs.modal",(function(t){t.isDefaultPrevented()||a.one("hidden.bs.modal",(function(){i.is(":visible")&&i.trigger("focus")}))})),s.call(a,o,this)}))}function s(i,s){return this.each((function(){var n=t(this),r=n.data("bs.modal"),a=t.extend({},e.DEFAULTS,n.data(),"object"==typeof i&&i);r||n.data("bs.modal",r=new e(this,a)),"string"==typeof i?r[i](s):a.show&&r.show(s)}))}}(springSpace.jq),(springSpace=springSpace||{}).sui=springSpace.sui||{},springSpace.sui.filedrop=function(t){if(void 0===t)return!1;if(!t.selector||""===t.selector)return!1;var e;if(this.callback=t.callback?t.callback:function(){},this.error_callback=t.error_callback?t.error_callback:function(){},this.validate=t.validate?t.validate:function(){return!0},this.max_files=t.max_files?parseInt(t.max_files,10):0,this.max_upload_size=t.max_upload_size?parseInt(t.max_upload_size,10):0,this.max_file_size=t.max_file_size?parseInt(t.max_file_size,10):0,this.batch_files=void 0!==t.batch_files&&!!t.batch_files,this.autoupload=void 0===t.autoupload||!!t.autoupload,this.translations=t.translations?t.translations:{max_file_size:"Maximum file size"},this.allowedMimeTypes=t.allowedMimeTypes?t.allowedMimeTypes:[],this.isAdvancedUpload=("draggable"in(e=document.createElement("div"))||"ondragstart"in e&&"ondrop"in e)&&"FormData"in window&&"FileReader"in window,this.$form=springSpace.jq(t.selector),0===this.$form.length)return!1;this.$droparea=this.$form.find(".s-ui-filedrop"),this.droppedFiles=[],this.batchedFiles=[],this.batch={current:0,total:0};var i=this;if(this.$input=this.$droparea.find('input[type="file"]'),this.$label=this.$droparea.find("label"),this.$submitbutton=this.$form.find('button[type="submit"]'),this.$progress=null,this.showFiles=function(){if(0!==this.$input.length){var t=this.$droparea[0].querySelector(".s-ui-filedrop-filenames"),e=t.querySelector("ul");if(this.isAdvancedUpload){var s=[],n=0;this.droppedFiles.forEach((function(t){var e=document.createElement("li");e.innerText=t.name,s.push(e),n+=t.size})),e.innerHTML="",0===s.length?t.classList.add("hidden"):(t.classList.remove("hidden"),s.forEach((function(t){e.appendChild(t)}))),this.max_files>0&&s.length>this.max_files&&this.showError(i.max_files+" file uploads maximum."),!1===this.batch_files&&this.max_upload_size>0&&n>this.max_upload_size&&this.showError("Files total "+i.bytesToMB(n)+" MB which exceeds the maximum of "+i.bytesToMB(this.max_upload_size)+" MB at a time.")}else{if(""===this.$input.val())return t.classList.add("hidden"),void(e.innerHTML="");t.classList.remove("hidden");var r=document.createElement("li");r.innerText=this.$input.val().split("\\").slice(-1).pop(),e.appendChild(r),this.$label.find(".filetext").addClass("hidden")}}},this.reset=function(){i.$form[0].reset(),i.removeError(),i.droppedFiles=[],i.batch.current=0,i.batch.total=0,i.stopProgress(),i.showFiles(),i.$input.removeClass("has-focus")},this.clearFiles=function(){i.resetFileInput(),i.droppedFiles=[],i.batch.current=0,i.batch.total=0,i.showFiles()},this.resetFileInput=function(){if(0!==this.$input.length){var t=springSpace.jq("<form>"),e=this.$input.clone(!0).appendTo(t);t[0].reset(),this.$input.replaceWith(e),this.$input=e}},this.showError=function(t){if(0!==this.$droparea.length){var e=document.createElement("p");if(e.innerText=t,this.$form.find("div.s-ui-filedrop-error").length>0)this.$form.find("div.s-ui-filedrop-error").append(e);else{var i=document.createElement("div");i.classList.add("alert"),i.classList.add("alert-danger"),i.classList.add("s-ui-filedrop-error"),i.setAttribute("role","alert"),i.appendChild(e),this.$droparea.prepend(i)}}},this.removeError=function(){this.$form.find("div.s-ui-filedrop-error").empty()},this.countFiles=function(){return 0===this.$input.length?0:this.isAdvancedUpload?this.droppedFiles.length:""!==this.$input.val()?1:0},this.startProgress=function(){if(null===this.$progress||1===this.$progress.length&&""===this.$progress.html()){var t=!0;this.$progress=this.$form.find("div.s-ui-filedrop-progress"),0===this.$progress.length&&(t=!1,this.$progress=springSpace.jq("<div></div>").addClass("s-ui-filedrop-progress"));var e=springSpace.jq("<div></div>").attr({id:"s-ui-filedrop-progresslabel"}).text("Uploading files"),i=springSpace.jq("<div></div>").addClass("s-ui-filedrop-progbar").attr({role:"progressbar","aria-valuenow":"0","aria-valuemin":"0","aria-valuemax":"100","aria-labelledby":"s-ui-filedrop-progresslabel"});i.append(document.createElement("span")),this.$progress.append([e,i]),t||this.$droparea.prepend(this.$progress)}},this.updateProgress=function(t,e){var i=Math.round(t/e*100);(this.$progress.find("span:first").css("width",i+"%"),this.$progress.find(".s-ui-filedrop-progbar").attr("aria-valuenow",i),this.batch.total>1&&i<50)&&this.$progress.find("div:first").html("Uploading file batch ("+this.batch.current+"/"+this.batch.total+")")},this.stopProgress=function(){null!==this.$progress&&this.$progress.empty()},this.bytesToMB=function(t){return(parseInt(t,10)/1048576).toFixed(1)},this.addFiles=function(t){if(i.max_files>0&&i.countFiles()+t.length>i.max_files)return i.showError(i.max_files+" file uploads maximum."),!1;var e=0;i.droppedFiles.forEach((function(t){e+=t.size}));for(var s=[],n=0;n<t.length;n++){var r=t[n];if(i.droppedFiles.length>0){var a=!1;if(i.droppedFiles.forEach((function(t){t.name===r.name&&(a=!0)})),a){s.push(n);continue}}this.allowedMimeTypes.length>0&&-1===this.allowedMimeTypes.indexOf(r.type)?(i.showError("File: "+r.name+" is not an allowed file type."),s.push(n)):i.max_file_size>0&&r.size>i.max_file_size?(i.showError("File: "+r.name+" is greater than allowed file size of "+i.bytesToMB(i.max_file_size)+" MB."),s.push(n)):!1===i.batch_files&&e+r.size>i.max_upload_size?(i.showError("File: "+r.name+" causes files to go over maximum upload size of "+i.bytesToMB(i.max_upload_size)+" MB at a time."),s.push(n)):e+=r.size}if(!1===i.batch_files&&i.max_upload_size>0&&e>i.max_upload_size)return i.showError("Files total "+e+" bytes which exceeds the maximum of "+i.bytesToMB(i.max_upload_size)+" MB at a time."),!1;for(var o=0;o<t.length;o++)-1===s.indexOf(o)&&i.droppedFiles.push(t[o]);return 0!==i.droppedFiles.length},this.batchFiles=function(){var t=[],e=[];if(!this.batch_files)return t.push(this.droppedFiles),t;var s=1;return t.push([]),e.push(0),this.droppedFiles.forEach((function(n){var r=!1;if(e.forEach((function(s,a){!r&&s+n.size<i.max_upload_size&&(e[a]=s+n.size,t[a].push(n),r=!0)})),!r){e.push(0),s++,t.push([]);var a=s-1;e[a]=n.size,t[a].push(n)}})),t},this.isLastBatch=function(){return this.batch.current>=this.batch.total},this.ajaxUpload=function(){i.$form.find('input[name="batch_current"]').val(i.batch.current);var t=new FormData(i.$form[0]);"function"==typeof t.delete&&t.delete(i.$input.attr("name")),i.batchedFiles[i.batch.current-1].forEach((function(e){t.append(i.$input.attr("name"),e)})),springSpace.jq.ajax({url:i.$form.attr("action"),type:i.$form.attr("method"),data:t,dataType:"json",cache:!1,crossDomain:!0,contentType:!1,processData:!1,beforeSend:function(){i.countFiles()>0&&i.startProgress()},complete:function(){i.isLastBatch()?(i.$form.removeClass("is-uploading"),i.$submitbutton.prop("disabled",!1),i.stopProgress()):(i.batch.current++,i.ajaxUpload())},success:function(t){i.callback(t,i)},xhr:function(){var t=springSpace.jq.ajaxSettings.xhr();return i.countFiles()>0&&(t.upload.onprogress=function(t){i.updateProgress(t.loaded,t.total)}),t}}).fail((function(t){i.error_callback(t,i)}))},this.isAdvancedUpload&&this.$input.length>0){if(this.$droparea.addClass("has-advanced-upload"),this.batch_files){var s=springSpace.jq("<input />").attr({type:"hidden",name:"batch_current"}).val("0"),n=springSpace.jq("<input />").attr({type:"hidden",name:"batch_total"}).val("0");this.$form.prepend([s,n])}this.$droparea.on("drag dragstart dragend dragover dragenter dragleave drop",(function(t){t.preventDefault(),t.stopPropagation()})).on("dragover dragenter",(function(){i.$droparea.addClass("is-dragover")})).on("dragleave dragend drop",(function(){i.$droparea.removeClass("is-dragover")})).on("drop",(function(t){var e=i.addFiles(t.originalEvent.dataTransfer.files);i.showFiles(),!0===e&&i.autoupload&&i.$form.submit()})).on("click",(function(t){var e=t.target.tagName;-1!==["A","I","SPAN","B","STRONG","BUTTON"].indexOf(e)&&(springSpace.jq(t.target).closest("a, button").hasClass("s-ui-filedrop-clear")&&(i.clearFiles(),i.removeError()))}))}if(this.isAdvancedUpload||(this.$input.remove(),this.$droparea.remove()),this.$input.length>0&&(this.$input.on("change",(function(t){if(t.target.files){if(i.isAdvancedUpload){var e=i.addFiles(t.target.files);i.resetFileInput(),!0===e&&i.autoupload&&i.$form.submit()}i.$input.removeClass("has-focus"),i.showFiles()}})).on("focus",(function(t){t.target.classList.add("has-focus")})).on("blur",(function(t){t.target.classList.remove("has-focus")})),this.translations.max_file_size)){var r=document.createElement("p");r.innerHTML=this.translations.max_file_size+": "+this.bytesToMB(this.max_file_size)+" MB",this.$label.append(r)}this.$form.on("submit",(function(t){if(i.$form.hasClass("is-uploading"))t.preventDefault();else{if(i.$form.removeClass("is-error"),i.removeError(),i.max_files>0&&i.countFiles()>i.max_files)return i.showError(i.max_files+" file uploads maximum."),void t.preventDefault();if(!1===i.validate(i))return i.$form.addClass("is-error"),void t.preventDefault();i.$form.addClass("is-uploading"),i.$submitbutton.prop("disabled",!0),i.isAdvancedUpload?(t.preventDefault(),i.batch.current=1,i.batchedFiles=i.batchFiles(),i.batch.total=i.batchedFiles.length,i.$form.find('input[name="batch_total"]').val(i.batch.total),i.ajaxUpload()):(t.preventDefault(),springSpace.jq.ajax({url:i.$form.attr("action"),type:i.$form.attr("method"),data:i.$form.serialize(),dataType:"json",complete:function(){i.$form.removeClass("is-uploading"),i.$submitbutton.prop("disabled",!1)},success:function(t){i.callback(t,i)}}).fail((function(t){i.error_callback(t,i)})))}}))};{class t{#t=null;#e="s-ui-notifyarea";#i="s-ui-notify";#s="s-ui-notify";#n={msg:'<i class="fa fa-spinner fa-pulse mg-right" aria-hidden="true"></i> <span>Working...</span>',className:"s-ui-notify-working"};#r={msg:"Success.",className:"s-ui-notify-success"};#a={msg:"Error: Please try again.",className:"s-ui-notify-error"};#o=0;#l=null;constructor({parent_id:t=null}){t&&(this.#e=t)}#h(){let t=document.getElementById(this.#e);return t||(t=document.createElement("DIV"),t.id=this.#e,t.setAttribute("role","alert"),t.setAttribute("aria-atomic","true"),document.body.appendChild(t)),t}#c(){return this.#t||(this.#t=this.#h()),this.#t}error(t="",e=null){const i={...this.#a};t&&(i.msg=t),i.msg=`<i class="fa fa-exclamation-triangle mg-right" aria-hidden="true"></i> ${i.msg}`,i.id=e,this.show(i)}success(t="",e=null,i=0){const s={...this.#r};t&&(s.msg=t),i>0&&(s.ms=i),s.msg=`<i class="fa fa-check-circle mg-right" aria-hidden="true"></i> ${s.msg}`,s.id=e,this.show(s)}working(t="",e=null){const i={...this.#n};t&&(i.msg=t),i.id=e,this.show(i)}show({msg:t="",className:e=null,id:i=null,ms:s=0}){if(!t)return null;let n=null;i?(n=document.getElementById(i),n&&n.remove()):(this.#o++,i=`${this.#i}-${this.#o}`),n=document.createElement("DIV"),n.id=i,n.classList.add(this.#s),e&&n.classList.add(e),n.innerHTML=`<div class="s-ui-notification-message">${t}</div><button class="btn" aria-label="${window?.springyText?.modal?.close||"Close"}">&times;</button>`;return this.#c().appendChild(n),n.addEventListener("click",(t=>{t.preventDefault(),this.hide(t.currentTarget)})),s>0&&setTimeout((()=>{this.hide(n)}),s),null===this.#l&&(this.#l=this.keyboardEvents.bind(this),document.addEventListener("keydown",this.#l,!0)),i}hide(t=null){t?t.remove():this.#t&&(this.#t.innerHTML=""),this.#d()}hideWorking(){this.#t&&(this.#t.querySelectorAll(`.${this.#n.className}`).forEach((t=>{t.remove()})),this.#d())}#d(){null===this.#l||!this.#t||this.#t.children.length>0||(document.removeEventListener("keydown",this.#l,!0),this.#l=null)}keyboardEvents(t){if("Escape"!==t.key)return;const e=this.#t.querySelector(`.${this.#s}`);e&&e.remove(),this.#d()}}window.suiNotify=new t({})}!function(t){const e={input:null,list:null,listLabel:"Suggested results",instructions:null,throttle:null,xhrSearch:null,queryName:"",queryProcessor:null,dataProcessor:null,selectCallback:null,typedQuery:"",resultLimit:10,queryData:{},staticData:[],preventSubmit:!1,instructionsText:"{{count}} options available. Use up and down arrows to browse available options and enter to select one.",showAllOnFocus:!1,allowEmptySearch:!1,selectNext:function(){const t=this.list.querySelector("li[aria-selected=true]");let e=null;if(null===t){if(e=this.list.querySelector("li:first-of-type"),null===e)return}else{if(e=t.nextElementSibling,null===e)return;t.setAttribute("aria-selected",!1)}e.setAttribute("aria-selected",!0),this.input.value=e.textContent},selectPrevious:function(){const t=this.list.querySelector("li[aria-selected=true]");if(null===t)return;const e=t.previousElementSibling;null===e?this.input.value=this.typedQuery:(e.setAttribute("aria-selected",!0),this.input.value=e.textContent),t.setAttribute("aria-selected",!1)},selectByClick:function(t){const e=this.list.querySelector("li[aria-selected=true]");null!==e&&e.setAttribute("aria-selected",!1),t.setAttribute("aria-selected",!0),this.selectOption(),this.showAllOnFocus||this.input.focus()},escapeRegExp:function(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},formatOption:function(t){let e="";if(t.display)e=t.display;else{const i=new RegExp(`(${this.escapeRegExp(this.typedQuery)})`,"ig");e=t.label.replace(i,"<strong>$1</strong>")}if(!e)return null;const i=document.createElement("li");return i.setAttribute("aria-selected",!1),i.setAttribute("role","option"),Object.keys(t).forEach((e=>{"label"!==e&&"display"!==e&&(i.dataset[e]=t[e])})),i.innerHTML=e,i},displayResults:function(t){if(0===t.length)return void this.closeList();let e=t.map(this.formatOption,this);e.length>this.resultLimit&&!this.allowEmptySearch&&(e=e.slice(0,this.resultLimit)),this.list.innerHTML="";const i=document.createDocumentFragment();e.forEach((t=>{t&&i.appendChild(t)})),this.list.appendChild(i),this.updateInstructions(e.length),this.openList()},isListOpen:function(){return!this.list.classList.contains("hidden")},isOptionSelected:function(){return null!==this.list.querySelector("li[aria-selected=true]")},openList:function(){this.list.style.left=`${this.input.offsetLeft}px`,this.list.style.top=`${this.input.offsetTop+this.input.offsetHeight}px`,this.list.style.minWidth=`${this.input.offsetWidth}px`,this.list.classList.remove("hidden"),this.input.setAttribute("aria-expanded",!0)},closeList:function(){this.list.classList.add("hidden"),this.list.innerHTML="",this.input.setAttribute("aria-expanded",!1),this.updateInstructions(0)},selectOption:function(){const t=this.list.querySelector("li[aria-selected=true]");this.input.dataset.oldvalue=this.input.value,this.input.value=t.textContent,null!==this.selectCallback&&this.selectCallback(t),this.closeList()},processData:function(t){return null!==this.dataProcessor?this.dataProcessor(t):t},buildQueryString:function(){const t=this.input.value,e=null!==this.queryProcessor?this.queryProcessor(t):t,i=new URLSearchParams;i.append(this.queryName,e),i.append("limit",this.resultLimit);return Object.keys(this.queryData).forEach((function(t){const e=this.queryData[t];"function"!=typeof e?i.append(t,e):i.append(t,e())}),this),`?${i.toString()}`},xhrOnLoad:function(){if(this.xhrSearch.status>=200&&this.xhrSearch.status<400){const t=JSON.parse(this.xhrSearch.responseText),e=this.processData(t);this.displayResults(e)}else console.log(this.xhrSearch.statusText)},xhrOnError:function(){console.log(this.xhrSearch.statusText)},makeRequest:function(){const t=this.buildQueryString();this.xhrSearch=new XMLHttpRequest,this.xhrSearch.open("GET",this.queryUrl+t,!0),this.xhrSearch.setRequestHeader("Accept","application/json"),this.xhrSearch.onload=this.xhrOnLoad.bind(this),this.xhrSearch.onerror=this.xhrOnError.bind(this),this.xhrSearch.send()},searchData:function(){const t=this.input.value;if(""===t&&!this.allowEmptySearch)return void this.closeList();let e=null!==this.queryProcessor?this.queryProcessor(t):t;if(e=e.toLowerCase(),""===e)return void this.displayResults(this.staticData);const i=this.staticData.filter((t=>-1!==t.label.toLowerCase().indexOf(e)));this.displayResults(i)},getExactMatch:function(){const t=this.input.value.trim().toLowerCase();if(""===t)return null;const e=this.staticData.find((e=>e.label.toLowerCase()===t));return e||null},query:function(){this.staticData.length>0?this.searchData():(this.throttle&&clearTimeout(this.throttle),this.xhrSearch&&this.xhrSearch.abort(),""!==this.input.value||this.allowEmptySearch?this.throttle=setTimeout(this.makeRequest.bind(this),500):this.closeList())},disable:function(){this.list.parentNode.removeChild(this.list)},createList:function(){this.list=document.createElement("ul"),this.list.id=this.getListId(),this.list.setAttribute("role","listbox"),this.list.setAttribute("aria-label",this.listLabel),this.list.classList.add("s-ui-autocomplete-list"),this.list.classList.add("hidden"),this.input.parentNode.insertBefore(this.list,this.input.nextSibling)},getListId:function(){return`${this.input.id}_list`},getInstructionsId:function(){return`${this.input.id}_instructions`},formatInput:function(){this.input.setAttribute("role","combobox"),this.input.setAttribute("aria-autocomplete","list"),this.input.setAttribute("aria-expanded","false"),this.input.setAttribute("aria-controls",this.getListId()),this.input.setAttribute("aria-describedby",this.getInstructionsId()),this.input.setAttribute("autocomplete","off"),this.queryName=this.input.getAttribute("name")},updateInstructions:function(t){this.instructions.innerHTML=this.instructionsText.replace("{{count}}",t)},handleTypingDown:function(t){const e=this.isListOpen();switch(t.key){case"Escape":e&&this.closeList();break;case"ArrowDown":e?(t.preventDefault(),this.selectNext()):this.showAllOnFocus&&""===this.input.value&&this.query();break;case"ArrowUp":e&&(t.preventDefault(),this.selectPrevious());break;case"Enter":e&&this.isOptionSelected()?(t.preventDefault(),this.selectOption()):this.preventSubmit&&t.preventDefault();break;case"Tab":e&&this.isOptionSelected()?this.selectOption():e&&this.closeList()}},handleTypingUp:function(t){switch(t.key){case"Escape":case"ArrowDown":case"ArrowUp":case"ArrowLeft":case"ArrowRight":case"Enter":case"Tab":break;default:this.typedQuery=this.input.value,this.query()}},handleClick:function(t){const e=t.target.closest("li[aria-selected=false]");null!==e&&this.selectByClick(e)},handleOutsideClick:function(t){const e=t.target;null!==e.closest(`#${this.list.id}`)||null!==e.closest(`#${this.input.id}`)||this.closeList()},attachEvents:function(){this.input.addEventListener("keydown",this.handleTypingDown.bind(this)),this.input.addEventListener("keyup",this.handleTypingUp.bind(this)),this.list.addEventListener("click",this.handleClick.bind(this)),document.body.addEventListener("click",this.handleOutsideClick.bind(this)),this.showAllOnFocus&&this.input.addEventListener("focus",(()=>{""===this.input.value&&this.query()}))},addInstructions:function(){this.instructions=document.createElement("div"),this.instructions.id=this.getInstructionsId(),this.instructions.setAttribute("aria-live","polite"),this.instructions.classList.add("sr-only"),this.instructions.innerHTML=this.instructionsText.replace("{{count}}",0),this.list.parentNode.insertBefore(this.instructions,this.list.nextSibling)},validateConfig:function(t){if(!t.inputSelector)throw new Error("Must set inputSelector.");if(null===this.input)throw new Error(`${t.inputSelector} not found in the DOM.`);if(!this.queryUrl&&0===this.staticData.length)throw new Error("Must set queryUrl or staticData.")},setConfig:function(t){this.input=document.querySelector(t.inputSelector);const e=["queryUrl","staticData","queryProcessor","dataProcessor","selectCallback","resultLimit","queryData","instructionsText","preventSubmit","listLabel","showAllOnFocus","allowEmptySearch"];Object.keys(t).forEach((function(i){-1!==e.indexOf(i)&&(this[i]=t[i])}),this),this.showAllOnFocus&&(this.allowEmptySearch=!0)},init:function(t){this.setConfig(t),this.validateConfig(t),this.formatInput(),this.createList(),this.addInstructions(),this.attachEvents()}};t.springSpace=t.springSpace||{},t.springSpace.sui=t.springSpace.sui||{},t.springSpace.sui.initAutocomplete=t.springSpace.sui.initAutocomplete||function(t){const i=Object.create(e);return i.init(t),i}}(this),function(t){t.springSpace=t.springSpace||{},t.springSpace.la=t.springSpace.la||{};t.springSpace.la.FormAutoReply=class{constructor({type:t=0,start:e=null,end:i=null,offhours:s=null,captchaAlwaysOn:n=!1,libauth_enabled:r=!1}){this.type=t,this.start=e,this.end=i,this.offhours=s,this.captchaAlwaysOn=n,this.libauth_enabled=r}isCaptchaEnabled(){return!this.libauth_enabled&&(!!this.captchaAlwaysOn||this.isAutoReplyEnabled())}isAutoReplyEnabled(){return 0!==this.type&&(1===this.type||(3===this.type?this._isBetweenDates():2===this.type&&this._isNowOffHours()))}getAutoReplyType(){return this.type}_isBetweenDates(){if(!this.end||!this.start)return!1;const t=Math.floor(Date.now()/1e3);return t>=this.start&&t<=this.end}_isNowOffHours(){return!0}}}(window),function(t){t.springSpace=t.springSpace||{},t.springSpace.la=t.springSpace.la||{};const e=Object.freeze({RULE_OPERATOR_EQUALS:0,RULE_OPERATOR_NOTEQUALS:1,RULE_OPERATOR_INCLUDES:2,RULE_OPERATOR_INCLUDES_ALL:3,RULE_ACTION_SHOW:0,RULE_ACTION_HIDE:1,RULE_ACTION_NONE:-1});t.springSpace.la.FormFieldRule=class{constructor({field1:t=0,operator:i=e.RULE_OPERATOR_EQUALS,value:s=[],field2:n=0,action:r=e.RULE_ACTION_SHOW}){this.field1=t,this.operator=i,this.value=Array.isArray(s)?s:[],this.field2=n,this.action=r}get oppositeAction(){return this.action===e.RULE_ACTION_SHOW?e.RULE_ACTION_HIDE:e.RULE_ACTION_SHOW}getFieldAction(t){if(0===t||0===t.length)return e.RULE_ACTION_HIDE;switch(this.operator){case e.RULE_OPERATOR_EQUALS:return this.value.includes(t)?this.action:this.oppositeAction;case e.RULE_OPERATOR_NOTEQUALS:return this.value.includes(t)?this.oppositeAction:this.action;case e.RULE_OPERATOR_INCLUDES:return Array.isArray(t)?t.filter((t=>this.value.includes(t))).length>0?this.action:this.oppositeAction:e.RULE_ACTION_NONE;case e.RULE_OPERATOR_INCLUDES_ALL:return Array.isArray(t)?t.filter((t=>this.value.includes(t))).length===this.value.length?this.action:this.oppositeAction:e.RULE_ACTION_NONE}return e.RULE_ACTION_NONE}}}(window),function(t){var e=t.springSpace.sui.initAutocomplete,i={id:0,iid:0,apiDomain:"",groupId:0,form:null,limit:10,autocomplete:null,autcompleteDataFormatCb:function(t){var e=[];return t.results.forEach((function(t){t.label=t.question,e.push(t)})),e},autocompleteSelectCb:function(t){let e=this.form.querySelector("input[name=originalq]");null===e&&(e=document.createElement("input"),e.setAttribute("type","hidden"),e.setAttribute("name","originalq"),this.form.insertBefore(e,this.form.firstChild));const i=this.form.querySelector("#s-la-content-search-query-"+this.id);e.value=i.dataset.oldvalue||"";var s=this.form.querySelector("input[name=faqid]");null===s&&((s=document.createElement("input")).setAttribute("type","hidden"),s.setAttribute("name","faqid"),this.form.insertBefore(s,this.form.firstChild)),s.value=t.getAttribute("data-faqid"),this.form.submit()},enableAutocomplete:function(){try{this.autocomplete=e({inputSelector:"#s-la-content-search-query-"+this.id,queryUrl:"https://"+this.apiDomain+"/faq/searchpublic",dataProcessor:this.autcompleteDataFormatCb.bind(this),selectCallback:this.autocompleteSelectCb.bind(this),queryData:{rows:this.limit,iid:this.iid,group_ids:this.groupId}})}catch(t){console.log(t.message)}},init:function(t){this.id=t.contentId,this.iid=t.iid,this.apiDomain=t.apiDomain,this.groupId=JSON.stringify(t.groupId),this.form=document.querySelector("#s-la-content-search-"+this.id+" form"),this.limit=t.limit?t.limit:10,this.enableAutocomplete()}};t.springSpace=this.springSpace||{},t.springSpace.la=this.springSpace.la||{},t.springSpace.la.initFaqSearchForm=function(t){var e=Object.create(i);return e.init(t),e}}(this),(()=>{"use strict";class t extends HTMLElement{static get props(){return{}}static get observedAttributes(){return Object.keys(this.props).map((t=>this.attributeName(t)))}static attributeName(t){return t.replace(/([a-zA-Z])(?=[A-Z])/g,"$1-").toLowerCase()}constructor(){super(),this.$={},this.attrToProp={},this.propToAttr={},Object.keys(this.constructor.props).forEach((t=>{const e=this.constructor.attributeName(t);this.attrToProp[e]=t,this.propToAttr[t]=e})),this.attachShadow({mode:"open"}),this._renderPromise=null,this._isConnected=!1,this._triggers={},this._props={}}connectedCallback(){if(this._isConnected)return;const t=Object.keys(this.constructor.props).reduce(((t,e)=>({...t,[e]:this[e]})),{});Object.keys(this.constructor.props).forEach((e=>{const i=this.constructor.props[e],s=this.propToAttr[e];let n=this[e];if(this.hasAttribute(s)){if(n=this.getAttribute(s),[Array,Object].includes(i.type))try{n=JSON.parse(n)}catch(t){}}else void 0!==t[e]&&(n=t[e]);Object.defineProperty(this,e,{set:this.setter(e),get:this.getter(e)}),this[e]=n})),this._isConnected=!0,this._render(!0,!0)}disconnectedCallback(){this._isConnected=!1}_requestRender(){this._renderPromise||(this._renderPromise=Promise.resolve().then((()=>{this._render()})))}_render(t=!1,e=!1){(t||Object.keys(this._triggers).length)&&(this._renderPromise=Promise.resolve().then((()=>{e&&(this.firstRender(this.shadowRoot,this._triggers),this.$=[...this.shadowRoot.querySelectorAll("[id]")].reduce(((t,e)=>({...t,[e.id]:e})),{}),this.firstRendered(this.shadowRoot,this._triggers)),this.render(this.shadowRoot,this._triggers),this.rendered(this.shadowRoot,this._triggers),this._renderPromise=null,this._triggers={}})))}forceRender(){this._render(!0)}firstRender(){}render(){}firstRendered(){}rendered(){}setter(t){const e=this.propToAttr[t];return i=>{if(this._props[t]===i)return;t in this._triggers||(this._triggers[t]=this._props[t]),this._props[t]=i;const s=this.constructor.props[t];if(this._isConnected&&this.constructor.observedAttributes.includes(e)){let t=i;s.type===Boolean?(t=t||""===t,t?this.setAttribute(e,""):this.removeAttribute(e)):([Array,Object].includes(s.type)&&(t=JSON.stringify(t)),this.getAttribute(e)!==t&&([null,void 0].includes(t)?this.removeAttribute(e):this.setAttribute(e,t)))}this._isConnected&&this._requestRender()}}getter(t){return()=>this._props[t]}attributeChangedCallback(t,e,i){const s=this.attrToProp[t];let n=i;switch(this.constructor.props[s].type){case Boolean:n=""===n;break;case Number:n=Number(n);break;case Array:case Object:try{n=JSON.parse(n)}catch(t){}}this[s]!==n&&(this[s]=n)}}const e=t;const i=class extends e{static get props(){return{date:{type:String},time:{type:String},value:{type:Object},showTime:{type:Boolean},confirmOnDate:{type:Boolean},locale:{type:String},dateStyle:{type:Object},startYear:{type:Number},endYear:{type:Number},startDay:{type:Number},defaultDate:{type:String},defaultTime:{type:String},hasNative:{type:Boolean},useNative:{type:Boolean},alignTop:{type:Boolean},alignRight:{type:Boolean}}}constructor(){super();const t=new Date;this.showTime=!1,this.confirmOnDate=!1,this.alignTop=!1,this.alignRight=!1,this.dateStyle={},this.startYear=t.getFullYear()-100,this.endYear=t.getFullYear()+5,this.startDay=1;try{const t=document.createElement("input");t.type="date",this.hasNative="date"===t.type}catch(t){this.hasNative=!1}this.onLabelClick=this.onLabelClick.bind(this),this.onClickOutside=this.onClickOutside.bind(this)}connectedCallback(){super.connectedCallback(),document.addEventListener("click",this.onClickOutside)}disconnectedCallback(){super.disconnectedCallback(),this._dateInput&&[...this._dateInput.labels||[]].forEach((t=>{t.removeEventListener("click",this.onLabelClick)})),document.removeEventListener("click",this.onClickOutside)}firstRender(t){const e=document.createElement("template");e.innerHTML='\n      <style>\n        :host {\n          position: relative;\n\n          --rgb: var(--aeon-rgb, 0, 0, 0);\n          --bgRgb: var(--aeon-bgRgb, 255, 255, 255);\n          --color: rgb(var(--rgb));\n          --hintColor: rgba(var(--rgb), 0.2);\n          --bgColor: rgb(var(--bgRgb));\n\n          color: var(--color);\n        }\n\n        ::slotted(input[type=date]),\n        ::slotted(input[type=time]) {\n          display: none;\n        }\n\n        :host([has-native][use-native]) ::slotted(input[type=date]),\n        :host([has-native][use-native]) ::slotted(input[type=time]) {\n          display: inline-flex;\n        }\n\n        :host([has-native][use-native]) slot[name=output] {\n          display: none;\n        }\n\n        aeon-calendar {\n            position: absolute;\n            top: 100%;\n            left: 0;\n            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.175);\n            border: 1px solid rgba(0, 0, 0, 0.15);\n            border-radius: 4px;\n            background-clip: padding-box;\n            padding: 12px;\n        }\n\n        :host([align-top]) aeon-calendar {\n          top: auto;\n          bottom: 100%;\n        }\n\n        :host([align-right]) aeon-calendar {\n          left: auto;\n          right: 0;\n        }\n\n        @media (max-width: 640px) {\n          aeon-calendar,\n          :host([align-top]) aeon-calendar,\n          :host([align-right]) aeon-calendar {\n            position: fixed;\n            top: 0;\n            left: 0;\n            bottom: 0;\n            right: 0;\n          }\n        }\n      </style>\n\n      <slot></slot>\n      <slot name="output"></slot>\n\n      <aeon-calendar id="calendar"></aeon-calendar>\n    ',t.appendChild(e.content.cloneNode(!0))}firstRendered(t){const e=t.querySelector("slot");e.addEventListener("slotchange",(()=>{const t=e.assignedNodes().filter((t=>t.nodeType!==Node.TEXT_NODE));this._dateInput=t.find((t=>"date"===t.getAttribute("type"))),this._dateInput&&(this._output.placeholder=this._dateInput.placeholder,(this._dateInput.labels||[]).forEach((t=>{t.addEventListener("click",this.onLabelClick)})),this.date=this._dateInput.value),this._timeInput=t.find((t=>"time"===t.getAttribute("type"))),this._timeInput&&(this.showTime=!0,this.time=this._timeInput.value)})),this._output=document.createElement("input"),this._output.slot="output",this._output.readOnly=!0,this._output.addEventListener("click",(()=>{this.openCalendar()})),this.appendChild(this._output),this.addEventListener("keyup",(t=>{if(t.stopPropagation(),"Enter"===t.key)this.$.calendar.open||this.openCalendar()})),this.$.calendar.addEventListener("change",(t=>{this.date=t.target.value.date,this.time=t.target.value.time,this.closeCalendar()})),this.$.calendar.addEventListener("clear",(()=>{this.date=""})),this.$.calendar.addEventListener("close",(()=>{this._dontFocus||this._output.focus(),this._dontFocus=!1}))}render(t,e){("date"in e||"time"in e)&&(this.value={date:this.date,time:this.time},this.updateFromString(this.date,this.time),this.dispatchEvent(new Event("change",{bubbles:!0}))),("locale"in e||"startYear"in e||"endYear"in e||"startDay"in e||"showTime"in e||"confirmOnDate"in e)&&this.updateFromString(this.date,this.time)}update(t=null){const e=t&&!isNaN(t);let i=t;if(!e){t=this.defaultDate;const e=this.defaultTime;i=this.parseDate(t,e)}const s=this.$.calendar;if(s.year=i.getFullYear(),s.month=i.getMonth(),s.day=i.getDate(),s.hours=i.getHours(),s.minutes=i.getMinutes(),s.locale=this.locale,s.startYear=this.startYear,s.endYear=this.endYear,s.startDay=this.startDay,s.showTime=this.showTime,s.confirmOnDate=this.confirmOnDate,e){const e=new Intl.DateTimeFormat(this.locale||void 0,{year:"numeric",month:"numeric",day:"numeric",...this.showTime?{hour:"numeric",minute:"numeric"}:{},...this.dateStyle}).format(t);this._output.value=e,this._dateInput&&(this._dateInput.value=this.date),this._timeInput&&(this._timeInput.value=this.time)}else this._output.value="",this._dateInput&&(this._dateInput.value=""),this._timeInput&&(this._timeInput.value="")}openCalendar(){const t=this.getBoundingClientRect(),e=t.top,i=window.innerHeight-t.bottom;this.alignTop=i<e,this.$.calendar.open=!0}closeCalendar(t=!1){this.$.calendar.open=!1,this._dontFocus=t}parseDate(t,e){try{const i=t.split("-"),s=(e||this.defaultTime||"00:00").split(":");return new Date(i[0],parseInt(i[1],10)-1,i[2],s[0],s[1])}catch(t){return new Date}}updateFromString(t,e){this.update(this.parseDate(t,e))}onLabelClick(t){this.useNative&&this.hasNative||(t.preventDefault(),this._output.focus())}onClickOutside(t){if(this.$.calendar.open){!t.composedPath().some((t=>t===this))&&this.closeCalendar(!0)}}};const s=class extends e{static get props(){return{value:{type:Number},items:{type:Array}}}constructor(){super(),this.items=[]}firstRender(t){const e=document.createElement("template");e.innerHTML='\n      <style>\n        select {\n          -webkit-appearance: none;\n          -moz-appearance: none;\n          padding: 0.5rem;\n          padding-right: 1.5rem;\n          font-family: inherit;\n          font-size: inherit;\n          border-radius: 0;\n          border: 1px solid var(--hintColor);\n          background-color: transparent;\n          color: var(--color);\n          width: 100%;\n        }\n\n        select::-ms-expand {\n          display: none;\n        }\n\n        .select {\n          position: relative;\n        }\n\n        .select .indicator {\n          position: absolute;\n          top: 0;\n          bottom: 0;\n          right: 0.2rem;\n          pointer-events: none;\n          display: flex;\n          align-items: center;\n        }\n      </style>\n\n      <div class="select">\n        <select id="select">\n        </select>\n        <span class="indicator">\n          <svg width="24" height="24">\n            <g><path fill="currentColor" d="M7 10l5 5 5-5z"></path></g>\n          </svg>\n        </span>\n      </div>\n    ',t.appendChild(e.content.cloneNode(!0))}focus(){this.$.select.focus()}firstRendered(){this.$.select.addEventListener("change",(t=>{this.value=t.target.value}))}render(t,e){"value"in e&&this.dispatchEvent(new Event("change",{bubbles:!0})),this.$.select.innerHTML=this.items.map((t=>`<option value="${t.value}">${t.name}</option>`)).join(""),this.$.select.value=this.value}};const n=class extends e{static get props(){return{date:{type:String},time:{type:String},value:{type:Object},showTime:{type:Boolean},confirmOnDate:{type:Boolean},locale:{type:String},startYear:{type:Number},endYear:{type:Number},startDay:{type:Number},year:{type:Number},month:{type:Number},day:{type:Number},hours:{type:Number},minutes:{type:Number},open:{type:Boolean}}}constructor(){super(),this.showTime=!1,this.confirmOnDate=!1,this.open=!1}connectedCallback(){super.connectedCallback(),this.addEventListener("keydown",this.onKeyDown.bind(this))}firstRender(t){const e=document.createElement("template");e.innerHTML='\n      <style>\n        :host {\n          display: none;\n          flex-direction: column;\n          align-items: center;\n          justify-content: center;\n          position: relative;\n          z-index: 3;\n          padding: 0.2rem;\n          background-color: var(--bgColor);\n        }\n\n        :host([open]) {\n          display: flex;\n        }\n\n        .week {\n          display: flex;\n          align-items: center;\n          justify-content: center;\n        }\n\n        .day, .date, button {\n          color: var(--color);\n          background-color: transparent;\n          border: 0;\n          box-sizing: border-box;\n          width: 33px;\n          height: 33px;\n          padding: 0;\n          font-family: inherit;\n          font-size: calc(2.8em / 3);\n\n          text-transform: uppercase;\n\n          flex-grow: 0;\n          display: flex;\n          flex-direction: column;\n          align-items: center;\n          justify-content: center;\n          cursor: pointer;\n        }\n\n        .date {\n          border: 1px solid var(--hintColor);\n          border-width: 0 0 1px 1px;\n        }\n\n        .date:last-child {\n          border-right-width: 1px;\n        }\n\n        .date.last + .spacer {\n          border-left-width: 1px;\n        }\n\n        .week:nth-child(2) .date:not(.spacer) {\n          border-top-width: 1px;\n        }\n\n        .week:last-child .spacer {\n          border-right-width: 0;\n          border-bottom-width: 0;\n        }\n\n        .date.today {\n            font-weight: bold;\n            background-image: linear-gradient(to bottom, #0088cc, #0044cc);\n            background-repeat: repeat-x;\n            border-color: #0044cc #0044cc #002a80;\n            color: #fff;\n            font-size: 1.3rem;\n        }\n\n        .date.spacer {\n          border-left-width: 0;\n          pointer-events: none;\n        }\n\n        #buttons {\n          width: 100%;\n          display: flex;\n          justify-content: space-between;\n          margin-top: 0.5em;\n          padding-top: 0.5em;\n          border-top: 1px solid var(--hintColor);\n        }\n\n        #year-month, #hours-minutes {\n          display: flex;\n          width: 100%;\n        }\n\n        #year-month aeon-select {\n          width: 50%;\n        }\n\n        #year-month aeon-select + aeon-select {\n          margin-left: 0.5em;\n        }\n\n        #hours-minutes {\n          padding-top: 0.5em;\n          margin-top: 0.5em;\n          border-top: 1px solid var(--hintColor);\n          display: none;\n          justify-content: center;\n          align-items: center;\n        }\n\n        #hours-minutes aeon-select {\n          width: 3.5em;\n        }\n\n        #hours-minutes aeon-select#hours {\n          margin-right: 0.2em;\n        }\n\n        #hours-minutes aeon-select#minutes {\n          margin-left: 0.2em;\n        }\n\n        :host([show-time]) #hours-minutes {\n          display: flex;\n        }\n      </style>\n\n      <div id="container">\n        <div id="year-month">\n          <aeon-select id="month"></aeon-select>\n          <aeon-select id="year"></aeon-select>\n        </div>\n        <div id="calendar"></div>\n        <div id="hours-minutes">\n          <aeon-select id="hours"></aeon-select>:<aeon-select id="minutes"></aeon-select>\n        </div>\n        <div id="buttons">\n          <button id="confirm" title="Confirm">\n            <svg width="24" height="24">\n              <g><path fill="currentColor" d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"></path></g>\n            </svg>\n          </button>\n          <button id="clear" title=\'Clear\'>\n            Clear\n          </button>\n          <button id="cancel" title="Cancel">\n            <svg width="24" height="24">\n              <g><path fill="currentColor" d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></g>\n            </svg>\n          </button>\n        </div>\n      </div>\n    ',t.appendChild(e.content.cloneNode(!0))}firstRendered(){this.addEventListener("keyup",(t=>{if(t.stopPropagation(),"Escape"===t.key)this.open=!1})),this.$.year.addEventListener("change",(t=>{this.year=t.target.value})),this.$.month.addEventListener("change",(t=>{this.month=t.target.value})),this.$.hours.items=[];for(let t=0;t<24;t++)this.$.hours.items.push({name:`${t}`.padStart(2,"0"),value:t});this.$.hours.addEventListener("change",(t=>{this.hours=t.target.value})),this.$.minutes.items=[];for(let t=0;t<60;t++)this.$.minutes.items.push({name:`${t}`.padStart(2,"0"),value:t});this.$.minutes.addEventListener("change",(t=>{this.minutes=t.target.value})),this.$.calendar.addEventListener("click",this.onDateClick.bind(this)),this.$.cancel.addEventListener("click",(()=>{this.open=!1})),this.$.confirm.addEventListener("click",(()=>{this.confirm()})),this.$.clear.addEventListener("click",(()=>{this.dispatchEvent(new Event("clear",{bubbles:!0})),this.open=!1}))}render(t,e){"open"in e&&!1===this.open&&!0===e.open&&this.dispatchEvent(new Event("close",{bubbles:!0})),("year"in e||"month"in e||"day"in e)&&(this.date=this.formatAsDate(this.year,this.month,this.day)),("hours"in e||"minutes"in e)&&(this.time=this.formatAsTime(this.hours,this.minutes));const i=new Date;i.setMonth(0),i.setDate(1),this.$.year.value=this.year,this.$.year.items=[];for(let t=this.startYear;t<=this.endYear;t++)this.$.year.items.push({value:t,name:t});this.$.month.value=this.month,this.$.month.items=[];for(let t=0;t<12;t++){const e=i.getMonth();this.$.month.items.push({value:e,name:i.toLocaleString(this.locale||void 0,{month:"short"})}),i.setMonth(t+1)}this.$.month.items.sort(((t,e)=>t.num-e.num)),i.setMonth(0),i.setDate(1);const s=[];for(let t=0;t<7;t++){const e=i.getDay();s.push({num:e,name:i.toLocaleString(this.locale||void 0,{weekday:"short"})}),i.setDate(t+2)}const n=7-this.startDay;s.sort(((t,e)=>(t.num+n)%7-(e.num+n)%7)),this.$.hours.value=this.hours,this.$.minutes.value=this.minutes;let r=new Date(this.year,this.month,1,12);const a=r.getDay();r.setMonth(r.getMonth()+1),r.setDate(0);const o=r.getDate();r=new Date(this.year,this.month,1,12);let l=!1,h=!1,c=0;this.$.calendar.innerHTML=`\n      <div class="week">\n        ${s.map((t=>`<div class="day">${t.name}</div>`)).join("")}\n      </div>\n\n      ${[0,1,2,3,4,5].map((()=>c>=o?null:`\n          <div class="week">\n            ${s.map((t=>{t.num%7===a&&(l=!0);let e="";l&&(c+=1,c<=o?(e=c,r.setDate(e)):h=!0);return`\n                  <button class="date ${c===this.day?"today":""} ${!l||h?"spacer":""} ${c===o?"last":""}" data-day="${c}" ${!l||h?'tabindex="-1" disabled':""}>${e}</button>\n              `})).join("")}\n          </div>\n         `)).join("")}\n    `;const d=t.querySelectorAll("button:not([disabled]), aeon-select");this._firstFocusableEl=d[0],this._lastFocusableEl=d[d.length-1]}rendered(t,e){!0===this.open&&("open"in e&&!1===e.open||"day"in e)&&t.querySelector(".today").focus()}confirm(){this.date=this.formatAsDate(this.year,this.month,this.day),this.time=this.formatAsTime(this.hours,this.minutes),this.value={date:this.date,time:this.time},this.dispatchEvent(new Event("change",{bubbles:!0}))}handleTabKey(t){const e=this.shadowRoot.activeElement;t.shiftKey&&e===this._firstFocusableEl?(this._lastFocusableEl.focus(),t.preventDefault()):t.shiftKey||e!==this._lastFocusableEl||(this._firstFocusableEl.focus(),t.preventDefault())}handleArrowKeys(t){let e=0;switch(t.key){case"ArrowUp":e=-7;break;case"ArrowRight":e=1;break;case"ArrowLeft":e=-1;break;case"ArrowDown":e=7}const i=new Date(this.year,this.month,this.day);i.setDate(this.day+e),this.year=i.getFullYear(),this.month=i.getMonth(),this.day=i.getDate()}onKeyDown(t){"Enter"===t.key?this.confirm():"Tab"===t.key?this.handleTabKey(t):["ArrowUp","ArrowRight","ArrowDown","ArrowLeft"].includes(t.key)&&this.handleArrowKeys(t)}onDateClick(t){if(t.target.classList.contains("date")){const e=t.target;this.day=parseInt(e.dataset.day,10),this.confirmOnDate&&!this.showTime&&this.confirm()}}formatAsDate(t,e,i){return`${t}-${`${e+1}`.padStart(2,"0")}-${`${i}`.padStart(2,"0")}`}formatAsTime(t,e){return`${`${t}`.padStart(2,"0")}:${`${e}`.padStart(2,"0")}`}};customElements.get("aeon-select")||customElements.define("aeon-select",s),customElements.get("aeon-calendar")||customElements.define("aeon-calendar",n),customElements.get("aeon-datepicker")||customElements.define("aeon-datepicker",i)})(),function(t){t.springSpace=t.springSpace||{},t.springSpace.la=t.springSpace.la||{};t.springSpace.la.askform=function(e){this.id=e.content_id,this.queue_id=e.queue_id,this.errormsg=e.errormsg,this.divselector=`#s-la-askform-${this.id}`,this.$form=springSpace.jq(`${this.divselector} form`),this.translations=e.translations,this.form_action=e.form_action,this.libauth_enabled=e.libauth_enabled||!1,this.libauth_authed=e.libauth_authed||!1,this.autoReplySettings=new t.springSpace.la.FormAutoReply(e.autoReplySettings||{}),this.captcha_enabled=this.autoReplySettings.isCaptchaEnabled(),this.autoreply_enabled=this.autoReplySettings.isAutoReplyEnabled(),this.captchaDiv=this.$form[0].querySelector(".formlibcpt"),this.confirmEmailDiv=this.$form[0].querySelector(".confem_wrap"),this.autoreply_type=this.autoReplySettings.getAutoReplyType(),this.captcha_enabled&&this.captchaDiv.classList.remove("hidden"),Array.isArray(e.rules)?this.rules=e.rules.map((e=>new t.springSpace.la.FormFieldRule(e))):this.rules=[],this.handleRequiredCheckBoxes=function(t){const e=t.target.name;if(!0===t.target.checked){const t=this.$form[0].querySelectorAll(`input[type=checkbox][name="${e}"]`);return void(t.length>0&&Array.prototype.forEach.call(t,(t=>{t.removeAttribute("required")}),this))}const i=t.target.closest("fieldset");if(null===i)return;i.querySelectorAll("input[type=checkbox]:checked").length>0||Array.prototype.forEach.call(i.querySelectorAll("input[type=checkbox]"),(t=>{t.setAttribute("required","")}),this)},this.markError=function(t,e){if(!t)return;const i=document.createElement("div");i.classList.add("error-message"),i.innerHTML=e;const s=t.closest("div.form-group");if(null===s)return;t.setAttribute("aria-invalid","true"),s.classList.add("has-error");const n=s.querySelector("label");n&&n.appendChild(i)},this.loadCaptcha=function(){const t=new URL(this.form_action);springSpace.jq.ajax({context:this,type:"GET",url:`https://${t.hostname}/form/libcpt`,data:{queue_id:this.queue_id,auto_type:this.autoReplySettings.type},dataType:"json"}).done((({html:t="",isNowOffHours:e=!1,isCaptchaAlwaysOn:i=!1})=>{if(2===this.autoreply_type&&(e||(this.autoreply_enabled=!1,this.confirmEmailDiv&&(this.confirmEmailDiv.querySelector('input[type="checkbox"]').disabled=!1,this.confirmEmailDiv.classList.remove("hidden"))),!t||!i&&!this.autoreply_enabled))return void this.captchaDiv.classList.add("hidden");this.captchaDiv.innerHTML=t,this.captchaDiv.classList.add("active"),this.captchaDiv.classList.remove("hidden");const s=this.captchaDiv.querySelector(".btn-cptreload");s&&s.addEventListener("click",this.loadCaptcha.bind(this))})).fail((()=>{this.captchaDiv.classList.add("hidden")}))},this.validateField=function(t){if(!t||t.disabled)return;if("SELECT"===t.tagName){const e=t.options[t.selectedIndex]||null;if(!e)return;const i=e.value;return void(""!==i&&"0"!==i||this.markError(t,this.errormsg.reqfields))}if("TEXTAREA"===t.tagName)return void(""===t.value.trim()&&this.markError(t,this.errormsg.reqfields));if("INPUT"!==t.tagName)return;const e=t.type;if("radio"!==e&&"checkbox"!==e)if("email"!==e)""===t.value.trim()&&this.markError(t,this.errormsg.reqfields);else if(t.checkValidity()||this.markError(t,this.errormsg.emailaddress),"confirm_pemail"===t.name){const e=this.$form[0].querySelector('input[name="pemail"]');t.value.trim()!==e.value.trim()&&this.markError(t,this.errormsg.emailnotmatch)}},this.validateFieldSet=function(t){const e=t.querySelectorAll("input");let i=!0;if(e.forEach((t=>{t.checkValidity()||(i=!1,t.setAttribute("aria-invalid","true"))})),i)return;const s=document.createElement("div");s.classList.add("error-message"),s.innerHTML=this.errormsg.reqfields,t.classList.add("has-error");const n=t.querySelector("legend");n&&n.appendChild(s)},this.validate=function(){if(this.libauth_enabled&&!this.libauth_authed)return!1;if(this.$form.attr("action",this.form_action),this.$form.find("label .error-message, legend .error-message").remove(),this.$form.find(".form-group").removeClass("has-error"),this.$form.find(".form-control, input[type=radio], input[type=checkbox]").attr("aria-invalid",!1),Array.from(this.$form[0].querySelectorAll("[required]")).forEach((t=>{this.validateField(t)})),Array.from(this.$form[0].querySelectorAll("fieldset[data-required]")).forEach((t=>{this.validateFieldSet(t)})),this.$form.find(".has-error").length>0)return this.$form.find("*[aria-invalid=true]:first").trigger("focus"),!1;let e=0;return t.springSpace.queryAnalyzer?e=t.springSpace.queryAnalyzer.qlog_id||0:t.springSpace.la.Page&&t.springSpace.la.Page.qlog_id&&(e=t.springSpace.la.Page.qlog_id),e>0&&this.$form.find("input[name=qlog]").val(e),t.suiNotify.working(),!0},this.createDismissableAlert=function(t,e){const i=document.createElement("div");i.classList.add("alert",`alert-${e}`,"alert-dismissable"),i.setAttribute("role","alert"),i.setAttribute("aria-atomic","true");const s=document.createElement("button");return s.type="button",s.classList.add("close"),s.setAttribute("aria-label","close"),s.innerHTML='<span aria-hidden="true">&times;</span>',i.appendChild(s),i.insertAdjacentHTML("beforeend",t),s.addEventListener("click",(t=>{t.preventDefault(),i.remove()})),i},this.resetRules=function(){this.rules.forEach((t=>{this.$form[0].querySelectorAll(`*[name="${t.field1}"], *[name="${t.field1}[]"]`).forEach((t=>{t.dispatchEvent(new Event("change"))}))}))},this.questionform=new t.springSpace.sui.filedrop({selector:`${this.divselector} form`,max_files:5,max_upload_size:20971520,max_file_size:20971520,batch_files:!1,autoupload:!1,supportie9:!1,translations:this.translations,callback:e=>{t.suiNotify.hide();const i=this.createDismissableAlert(e.message,"success");this.$form[0].querySelector("#s-la-askform-buttons").insertAdjacentElement("beforebegin",i),this.questionform.reset(),this.resetRules(),this.captcha_enabled&&this.loadCaptcha(),this.autoreply_enabled&&this.confirmEmailDiv&&(this.confirmEmailDiv.querySelector('input[type="checkbox"]').disabled=!0,this.confirmEmailDiv.classList.add("hidden"))},error_callback:e=>{let i="Error";const s=449===e.status;if(e.responseText)try{const t=JSON.parse(e.responseText);t.error&&(i=t.error)}catch(t){i="Invalid response received"}t.suiNotify.hide();const n=this.createDismissableAlert(i,"danger");let r=null,a="beforebegin";s&&(r=this.$form[0].querySelector(".formlibcpt"),r&&(a="afterbegin")),r||(r=this.$form[0].querySelector("#s-la-askform-buttons")),r.insertAdjacentElement(a,n)},validate:this.validate.bind(this)}),this.showField=function(t){t.classList.remove("hidden"),t.querySelectorAll("select, input, textarea").forEach((t=>{t.disabled=!1}))},this.hideField=function(t){t.classList.add("hidden"),t.querySelectorAll("select, input, textarea").forEach((t=>{["checkbox","radio"].includes(t.type)?t.checked=!1:t.value="",t.dispatchEvent(new Event("change")),t.disabled=!0}))},this.getMultiCheckValue=function(t){const e=new FormData(this.$form[0]);return Array.from(e.getAll(t)).map((t=>Number(t)))},this.getRadioValue=function(t){const e=new FormData(this.$form[0]);return Number(e.get(t))},this.setUpRules=function(){this.rules.forEach((t=>{this.$form[0].querySelectorAll(`*[name="${t.field1}"], *[name="${t.field1}[]"]`).forEach((e=>{const i=this.$form[0].querySelector(`.${t.field2}_wrap`);i&&e.addEventListener("change",(e=>{let s=Number(e.target.value);"checkbox"===e.target.type?s=this.getMultiCheckValue(e.target.name):"radio"===e.target.type&&(s=this.getRadioValue(e.target.name));const n=t.getFieldAction(s);0===n?this.showField(i):1===n&&this.hideField(i)}))}))}))},this.setUp=function(){if(this.libauth_enabled&&!this.libauth_authed){if(this.questionform.$form[0].querySelectorAll("input,select,button,textarea").forEach((t=>{t.disabled=!0})),this.questionform.$form[0].querySelectorAll('[tabindex="0"],a').forEach((t=>{t.setAttribute("tabindex","-1")})),this.questionform.$form[0].setAttribute("aria-hidden","true"),window!==window.top){const t=document.querySelector(`${this.divselector} .btn-libauth`);t&&t.setAttribute("target","_blank")}return}this.setUpRules();const t=this.questionform.$form[0].querySelectorAll("input[type=checkbox][required]");t.length>0&&Array.prototype.forEach.call(t,(function(t){t.addEventListener("change",this.handleRequiredCheckBoxes.bind(this))}),this),this.captcha_enabled&&this.loadCaptcha(),this.autoreply_enabled&&this.confirmEmailDiv&&(this.confirmEmailDiv.querySelector('input[type="checkbox"]').disabled=!0,this.confirmEmailDiv.classList.add("hidden"))},this.setUp()}}(window),(springSpace=springSpace||{}).regex={email:/^<?(['a-zA-Z0-9_=\.\-\+&!#\$%\*\?\^\|\{\}\~])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,6})+>?$/i,url:/^((mailto|https?):)*\/\/.+/i,phone:/^\+?[0-9]{10,}$/,date:/^[0-9]{4}-[0-9]{2}-[0-9]{2}$/,datetime:/^[0-9]{4}-[0-9]{2}-[0-9]{2}\s[0-9]{1,2}:[0-9]{2}(:[0-9]{2})?$/,color:/^#([a-f0-9A-F]{6}|[a-f0-9A-F]{3})$/};
//# sourceMappingURL=maps/LibAnswers_widget.min.js.map
